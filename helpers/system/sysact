#!/bin/sh

cmds="\
leave
suspend
reboot
halt
shutdown
"

choice="$(echo "$cmds" | cut -d' ' -f 1 | dmenu)"

case $choice in
leave)
    $cryptomatorPID = $(pgrep Cryptomator)
    if pgrep -x "Cryptomator" >/dev/null; then
        kill -TERM $cryptomatorPID
    fi
    fusermount -uz /home/$USER/gdrive
    kill -TERM $(pidof -s xmonad-x86_64-linux)
    ;;
suspend)
    sudo -A systemctl suspend
    ;;
halt)
    sudo -A systemctl halt
    ;;
reboot)
    sudo -A systemctl reboot
    ;;
shutdown)
    sudo -A systemctl poweroff
    ;;
esac
